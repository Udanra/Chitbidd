{% extends "dashboard.html" %}
{% load custom_filters %}<!--Unwanted-->
{% load static %}

{% block body_block %}

<!DOCTYPE html>

<html lang="en">
<head>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>User Table</title>
    <!-- BOOTSTRAP SCRIPT -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
          crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
            crossorigin="anonymous"></script>
    <!-- BOOTSTRAP SCRIPT -->
    <!--Google font link-->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <!--Google font link-->
    <!--Font Awesome-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.css" />

    <!--Font Awesome-->

    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .hidden-column {
            display: none;
        }

    </style>

    <script>
        function toggleColumnsRead() {

            console.log("toggleColumns() called");

            var email_checkbox = document.getElementById("email_checkbox");
            var language_checkbox = document.getElementById("language_checkbox");
            var agent_checkbox = document.getElementById("agent_checkbox");
            var is_email_verified_checkbox = document.getElementById("is_email_verified_checkbox");
            var is_profile_created_checkbox = document.getElementById("is_profile_created_checkbox");
            var uid_checkbox = document.getElementById("uid_checkbox");
            var url_checkbox = document.getElementById("url_checkbox");

            var email_cells = document.getElementsByClassName("email");
            var language_cells = document.getElementsByClassName("language");
            var agent_cells = document.getElementsByClassName("agent");
            var is_email_verified_cells = document.getElementsByClassName("is_email_verified");
            var is_profile_created_cells = document.getElementsByClassName("is_profile_created");
            var uid_cells = document.getElementsByClassName("uid");
            var url_cells = document.getElementsByClassName("url");

            var email_heading = document.getElementById("email");
            var language_heading = document.getElementById("language");
            var agent_heading = document.getElementById("agent");
            var is_email_verified_heading = document.getElementById("is_email_verified");
            var is_profile_created_heading = document.getElementById("is_profile_created");
            var uid_heading = document.getElementById("uid");
            var url_heading = document.getElementById("url");


            if (email_checkbox.checked) {
                email_heading.classList.remove("hidden-column");
                for (var i = 0; i < email_cells.length; i++) {
                    email_cells[i].classList.remove("hidden-column");
                }
            } else {
                email_heading.classList.add("hidden-column");
                for (var i = 0; i < email_cells.length; i++) {
                    email_cells[i].classList.add("hidden-column");
                }
            }


            if (language_checkbox.checked) {
                language_heading.classList.remove("hidden-column");
                for (var i = 0; i < language_cells.length; i++) {
                    language_cells[i].classList.remove("hidden-column");
                }
            } else {
                language_heading.classList.add("hidden-column");
                for (var i = 0; i < language_cells.length; i++) {
                    language_cells[i].classList.add("hidden-column");
                }
            }

            if (agent_checkbox.checked) {
                agent_heading.classList.remove("hidden-column");
                for (var i = 0; i < agent_cells.length; i++) {
                    agent_cells[i].classList.remove("hidden-column");
                }
            } else {
                agent_heading.classList.add("hidden-column");
                for (var i = 0; i < agent_cells.length; i++) {
                    agent_cells[i].classList.add("hidden-column");
                }
            }

            if (is_email_verified_checkbox.checked) {
                is_email_verified_heading.classList.remove("hidden-column");
                for (var i = 0; i < is_email_verified_cells.length; i++) {
                    is_email_verified_cells[i].classList.remove("hidden-column");
                }
            } else {
                is_email_verified_heading.classList.add("hidden-column");
                for (var i = 0; i < is_email_verified_cells.length; i++) {
                    is_email_verified_cells[i].classList.add("hidden-column");
                }
            }

            if (is_profile_created_checkbox.checked) {
                is_profile_created_heading.classList.remove("hidden-column");
                for (var i = 0; i < is_profile_created_cells.length; i++) {
                    is_profile_created_cells[i].classList.remove("hidden-column");
                }
            } else {
                is_profile_created_heading.classList.add("hidden-column");
                for (var i = 0; i < is_profile_created_cells.length; i++) {
                    is_profile_created_cells[i].classList.add("hidden-column");
                }
            }

            if (uid_checkbox.checked) {
                uid_heading.classList.remove("hidden-column");
                for (var i = 0; i < uid_cells.length; i++) {
                    uid_cells[i].classList.remove("hidden-column");
                }
            } else {
                uid_heading.classList.add("hidden-column");
                for (var i = 0; i < uid_cells.length; i++) {
                    uid_cells[i].classList.add("hidden-column");
                }
            }

            if (url_checkbox.checked) {
                url_heading.classList.remove("hidden-column");
                for (var i = 0; i < url_cells.length; i++) {
                    url_cells[i].classList.remove("hidden-column");
                }
            } else {
                url_heading.classList.add("hidden-column");
                for (var i = 0; i < url_cells.length; i++) {
                    url_cells[i].classList.add("hidden-column");
                }
            }


        }
    </script>

</head>
<body>

    <div class="content">
        <h3 class="mb-4">User Details</h3>

        <!-- Column Filter -->
        <div class="filter_by_column">
            <hr />
            <a href="{% url 'create_document' %}" class="btn btn-primary btn-sm py-0">
                <span class="material-symbols-outlined">add</span>
            </a>
            <button class="btn btn-sm btn-warning border" data-toggle="collapse" href="#collapseColumnFilter" role="button" aria-expanded="false" aria-controls="collapseColumnFilter">Column Filter</button>
        </div>

        <br />

        <div class="collapse" id="collapseColumnFilter">
            <div class="card card-body mb-3">

                <div class="row">
                    <div class="form-check form-switch mb-3">
                        <label for="email">E-mail  </label>
                        <input type="checkbox" id="email_checkbox" onchange="toggleColumnsRead()" />

                    </div>
                    <div class="form-check form-switch mb-3">
                        <label for="language">Language</label>
                        <input type="checkbox" id="language_checkbox" onchange="toggleColumnsRead()" />
                    </div>
                    <div class="form-check form-switch mb-3">
                        <label for="agent">Agent</label>
                        <input type="checkbox" id="agent_checkbox" onchange="toggleColumnsRead()" />
                    </div>
                </div>
                <!-- Add checkboxes for other columns here -->

                <div class="row">
                    <div class="form-check form-switch ">
                        <label for="is_email_verified">Is_Email_Verified</label>
                        <input type="checkbox" id="is_email_verified_checkbox" onchange="toggleColumnsRead()" />
                    </div>
                    <div class="form-check form-switch ">
                        <label for="is_profile_created">Is_Profile_Created</label>
                        <input type="checkbox" id="is_profile_created_checkbox" onchange="toggleColumnsRead()" />
                    </div>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <div class="form_check form_switch">
                        <label for="uid">Uid</label>
                        <input type="checkbox" id="uid_checkbox" onchange="toggleColumnsRead()" />
                    </div>
                    <div class="form-check form-switch ">
                        <label for="url">Url</label>
                        <input type="checkbox" id="url_checkbox" onchange="toggleColumnsRead()" />
                    </div>
                </div>
            </div>
        </div>
        <!-- End Column Filter -->

        <div class="table-responsive">
            {% if user %}
            <table class="table table-hover  text-center " id="myTable">
                <thead>
                    <tr>
                        <th class="text-center">S.No</th>
                        <th class="text-center">Name</th>
                        <th class="text-center">Date_Of_Birth</th>
                        <th class="text-center">Gender</th>
                        <th id="email" class="hidden-column text-center">E-mail</th>
                        <th class="text-center">Mobile_Number</th>
                        <th class="text-center">Organization</th>
                        <th id="language" class="hidden-column text-center">Language</th>
                        <th id="agent" class="hidden-column text-center">Agent</th>
                        <th id="is_email_verified" class="hidden-column text-center">Is_Email_Verified</th>
                        <th id="is_profile_created" class="hidden-column text-center">Is_Profile_Created</th>
                        <th id="uid" class="hidden-column text-center">Uid</th>
                        <th id="url" class="hidden-column text-center">Url</th>
                        <th class="text-center">Action</th>
                    </tr>
                </thead>
                {% for user in users %}

                <tr>
                    <td class="text-center">{{ forloop.counter }}</td>
                    <td class="text-center">{{ user.name }}</td>
                    <td class="text-center">{{ user.dob }}</td>
                    <td class="text-center">{{ user.gender }}</td>
                    <td class="hidden-column email text-center">{{ user.email }}</td>
                    <td class="text-center">{{ user.phone_no }}</td>
                    <td class="text-center">{{ user.organization }}</td>
                    <td class="hidden-column language text-center">{{user.language}}</td>
                    <td class="hidden-column agent text-center">{{user.agent}}</td>
                    <td class="hidden-column is_email_verified text-center">{{user.email_verified}}</td>
                    <td class="hidden-column is_profile_created text-center">{{user.profile}}</td>
                    <td class="hidden-column uid text-center">{{user.uid}}</td>
                    <td class="hidden-column url text-center">{{user.url}}</td>
                    <td class="text-center">
                        <div class="btn-group">
                            <a href="{% url 'update_document' document_id=user.id %}" class=" btn-outline-primary btn-sm ">
                                <span class="material-symbols-outlined">
                                    edit
                                </span>
                            </a>

                            <a href="{% url 'download_excel'  document_id=user.id  %}" class=" btn-outline-success btn-sm ">
                                <i class="fa fa-file-excel-o">Excel</i>
                            </a>

                            <a href="{% url 'download_pdf' document_id=user.id %}" class=" btn-outline-danger btn-sm  ">
                                <span class="material-symbols-outlined">
                                    picture_as_pdf
                                </span>
                            </a>

                            <a href="{% url 'delete_document' document_id=user.id %}" class=" btn-outline-dark btn-sm ">
                                <span class="material-symbols-outlined">
                                    delete
                                </span>
                            </a>
                        </div>
                    </td>
                </tr>


                {% endfor %} {% endif %}
            </table>
        </div>
    </div>


    <!-- Table -->
    <br />

    <!-- Add New Button -->
    <!-- Add New Button -->
    <br />

    <!-- Pagination -->
    <div>
        <ul class="pagination justify-content-center">

            <li class="page-item ">
                <a class="page-link" a>&laquo;</a>
            </li>
            <li class="page-item">
                <a class="page-link">1</a>
            </li>
            <li class="page-item">
                <a class="page-link">&raquo;</a>
            </li>
        </ul>
    </div>
    <!-- Pagination -->


    

    {% endblock %}
</body>
</html>


